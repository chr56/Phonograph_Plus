# Phonograph Plus

[![Crowdin](https://badges.crowdin.net/phonograph-plus/localized.svg)](https://crowdin.com/project/phonograph-plus)
[![License: GPL v3](https://img.shields.io/badge/License-GPL%20v3-blue.svg)](https://github.com/chr56/Phonograph_Plus/blob/release/LICENSE.txt)
[<img src="https://github.com/chr56/Phonograph/workflows/ci/badge.svg" alt="CI Status">](https://github.com/chr56/Phonograph_Plus/actions/workflows/ci.yml)

**Phonograph ç¬¬ä¸‰æ–¹ç»´æŠ¤ç‰ˆ**

**A fork of Phonograph under maintenance and development**

A material designed local music player for Android.

<br/>

This is a fork of [Phonograph](https://github.com/kabouzeid/Phonograph), with some extra additional features.

## **ç‰¹æ€§** / **Features**

å»ºè®®ç›´æ¥çœ‹[æ›´æ–°æ—¥å¿—](app/src/main/assets/changelog-ZH-CN.html)!

It is suggested to browser the [Changelog](app/src/main/assets/changelog.html) to learn all features completely.

- è§£é” Pro | Unlock pro.

- è‡ªåŠ¨å¤œé—´æ¨¡å¼ | Automatic & adaptive dark mode.

- è°ƒæ•´ç•Œé¢ | Many changes to UI.

- åº”ç”¨å†…æ‰‹åŠ¨æ›´æ”¹è¯­è¨€ | Change language in application manually.

- è¯¦æƒ…å¯¹è¯æ¡†å†…æ˜¾ç¤º Tag ä¿¡æ¯ | Show tag information in "Detail" Dialog

- æ­Œè¯å¯¹è¯æ¡†å†…æ˜¾ç¤ºæ­Œè¯æ—¶é—´è½´ä¿¡æ¯, å¹¶å¯ä»¥é€šè¿‡é•¿æŒ‰è¿›è¡Œå¿«é€Ÿè½¬è·³ä¸è‡ªåŠ¨æ»šåŠ¨ | Show Time Axis in "Lyrics" Dialog and allow seeking basing lyric's time axis and
  support lyrics following.

- é€‚é… Android 11 åˆ†åŒºå­˜å‚¨ ï¼ˆéƒ¨åˆ†ï¼‰ | Fix Android 11 Scope Storage.(WIP)

- é€‚å½“æŠ˜å æ­Œæ›²å¼¹å‡ºèœå• | Optimise song item menu.

- æ”¹è¿›åª’ä½“åº“äº¤äº’ | Improve â€œLibraryâ€ pages user experienceã€‚

- å¢å¤§â€œæœ€è¿‘æ’­æ”¾â€å’Œâ€œæœ€å–œçˆ±çš„æ­Œæ›²(å®é™…æ˜¯â€œæœ€å¸¸æ’­æ”¾â€çš„æ­Œæ›²)â€æ¡ç›®æ•°é‡(100â†’150) | Increase history played tracks and top played tracks entries capacity (
  100->150).

- æ–°å¢å´©æºƒæŠ¥å‘Šé¡µé¢ | Handle app crash.

- æ”¯æŒæ›´å¤šæ’åºæ–¹å¼ | Support more sort orders.

- åœ¨æ­Œæ›²(æˆ–æ–‡ä»¶)å¼¹å‡ºèœå•ä¸­, å¿«é€Ÿæ·»åŠ é»‘åå• | Add song menu shortcut to add new items to blacklist.

- é€‚é…" [å¢¨Â·çŠ¶æ€æ æ­Œè¯](https://github.com/Block-Network/StatusBarLyric) "Xposed æ¨¡å— | Co-work-with/Support StatusBar Lyric
  Xposed Module (api)
- æ”¯æŒå¯¼å‡ºå†…éƒ¨æ•°æ®åº“ä»¥ä¾›å¤‡ä»½ | Export internal databases for the need of backup.

- å…è®¸æ ‡ç­¾å›ºå®šå¹¶å¹³é“º | Allow tabs fixed.

- æ›´æ–°å¯¹è¯æ¡†æ ·å¼ | Update dialogs style.

- ä»¥åŠæ›´å¤šç»†å°ç‰¹æ€§ | and more small features/fixes.

## **ç¿»è¯‘**/**Translation**

Translate Phonograph Plus into your language -> [Crowdin](https://crowdin.com/project/phonograph-plus)

We have removed Swedish and Norwegian Nynorsk translations due to missing too many translations

## **æˆªå›¾**/**Screenshot**

ä»…ä¾›å‚è€ƒï¼Œ ä»¥å®é™…ä¸ºå‡†

For reference only, actual app might be different

|                                       Card Player                                       |                                       Flat Player                                       |
| :-------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------: |
| ![Screenshots](fastlane/metadata/android/en-US/images/phoneScreenshots/05.jpg?raw=true) | ![Screenshots](fastlane/metadata/android/en-US/images/phoneScreenshots/08.jpg?raw=true) |

|                                         Drawer                                          |                                         Setting                                         |
| :-------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------: |
| ![Screenshots](fastlane/metadata/android/en-US/images/phoneScreenshots/03.jpg?raw=true) | ![Screenshots](fastlane/metadata/android/en-US/images/phoneScreenshots/01.jpg?raw=true) |

|                                          Songs                                          |                                         Folders                                         |
| :-------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------: |
| ![Screenshots](fastlane/metadata/android/en-US/images/phoneScreenshots/09.jpg?raw=true) | ![Screenshots](fastlane/metadata/android/en-US/images/phoneScreenshots/10.jpg?raw=true) |

|                                         Artists                                         |                                        Playlists                                        |
| :-------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------: |
| ![Screenshots](fastlane/metadata/android/en-US/images/phoneScreenshots/07.jpg?raw=true) | ![Screenshots](fastlane/metadata/android/en-US/images/phoneScreenshots/06.jpg?raw=true) |

|                                        Song Menu                                        |                                 Tag Editor (Deprecated)                                 |
| :-------------------------------------------------------------------------------------: | :-------------------------------------------------------------------------------------: |
| ![Screenshots](fastlane/metadata/android/en-US/images/phoneScreenshots/02.jpg?raw=true) | ![Screenshots](fastlane/metadata/android/en-US/images/phoneScreenshots/04.jpg?raw=true) |

## **Build Instructions** / **æ„å»ºæŒ‡å—**

_This part is not written very well._

Currently(2020.10.15), this project's toolchain&dependencies are:

- `Android SDK` `33` (no `NDK`), requiring `JDK` `11`
- `Gradlew` `7.5.1`
- `Android Gradle Plugin` `7.3.0`
- `kotlin` for JVM(ANdroid) `1.7.10`
- `kotlinx.serialization`,`kotlinx.parcelize`
- most popular `androidx`(`Jetpack`) components (most of them are latest)
- popular 3rd-party libraries available on (`MavenCentral` and `jitpack.io`), some might kind of old and unmaintained
- `unpopular` 3rd-party libraries: `AdrienPoupa`'s `jaudiotagger`, `coil`
- some modified libraries by me

and

- <del>`Jetpack Compose`</del> coming soon in next versions

### Requirement

**Build**:

1) a PC : any desktop operate system platform (only `Windows` and `Ubuntu 20.04` are tested), I am not sure if it works
   on `Android(Termux)`.
2) JDK 11 (we are targeting API 33)
3) connected network

**Development**:

plus `Android Studio` with correspond `Android Gradle Plugin`

### Instructions (Build with commandline)

`bash`(on Linux) and `powershell` (on Windows) are tested.

0) Download source code

1) install JDK

(JDK 17 is untested)

on Windows
```shell
winget install --id EclipseAdoptium.Temurin.11.JDK
# or other vendor's JDK
```

on Linix (Debian based)
```shell
apt-get install temurin-11-jdk
```

on Linux ( `Fedora` / `RedHat` / `SUSE` )
```shell
yum install temurin-11-jdk
```

2) change your shell to repository's root 
3) generate a new signing key or use your own

4) configure Signing Config 

create file `signing.properties` on repository's root:
```properties
storeFile=<your-signing-key-file-path->
storePassword=<keystore-password>
keyAlias=<key-alias>
keyPassword=<key-password>
```
replace <*> with yours

You can create `signing.properties` by command:
```shell
echo "storeFile=<your-signing-key-file-path->" >> ./signing.properties
echo "storePassword=<keystore-password>" >> ./signing.properties
echo "keyAlias=<key-alias>" >> ./signing.properties
echo "keyPassword=<key-password>" >> ./signing.properties
```

4) build

```shell
 ./gradlew assembleStableRelease --parallel
```

5) pick up file

built apk is in `./app/build/outputs/apk/stable/release/` with name `PhonographPlus_<VERSION>-stable-release.apk`

you can run 
```shell
./gradlew PublishStableRelease
```
to move apk to `./products/stableRelease` and rename to `Phonograph Plus_<VERSION>.apk`


## **å¼€å‘è®¡åˆ’**/**Development Plan (or Road Map?)**

<br/>

**Phonograph Plus** is (partially) migrating to ğŸš€ Jetpack Compose -> see Branch [Compose](https://github.com/chr56/Phonograph_Plus/tree/Compose)

**Phonograph Plus** æ­£åœ¨ï¼ˆéƒ¨åˆ†ï¼‰è¿ç§»è‡³ ğŸš€ Jetpack Compose -> å‚è§ [Compose](https://github.com/chr56/Phonograph_Plus/tree/Compose)

<br/>

## **TO-DO list**

**2022**

- [x] é‡æ„æ–‡ä»¶è§†å›¾ | Refactor File Fragment

- [x] é‡æ„åª’ä½“åº“ UI | Refactor Library UI

- [x] å®ç°æ›´å¥½çš„æ’­æ”¾é¢‘ç‡è®¡æ•° | Better 'My Top Songs' algorithm

- [x] å®Œæˆ Readme | Complete README

- [x] é‡æ„åå°éŸ³ä¹æœåŠ¡ | Refactor MusicService

- [x] è¿ç§» Glide è‡³ Coil | Migrate Glide to Coil

- [ ] æ”¯æŒç™½åå•æœºåˆ¶ | Whitelist

- [ ] å°†æ­Œæ›²â€œè¯¦æƒ…â€ è¿ç§»è‡³ Compose â­•WIP (åŸºæœ¬å®Œæˆ) | Migrate Song Detail to Jetpack Compose (â­•WIP: Almost Done)

- [ ] é‡æ„è®¾ç½® UI | Refactor Setting UI

- [ ] é‡æ„æ›´æ–°å¯¹è¯æ¡† | Refactor Update Dialog

- [ ] é‡æ„æœç´¢ | Refactor Search

- [ ] è‡ªå®šä¹‰æ­Œæ›²ç‚¹å‡»è¡Œä¸º â­• | User-defined click behavior for songs â­•

- [ ] è‡ªå»ºæœ¬åœ°åª’ä½“æ•°æ®åº“(ä½¿ç”¨ AndroidX Room) â­•, ä»¥è§£æå¤šè‰ºæœ¯å®¶æ­Œæ›², å¹¶è§£æ Tag ä¸­ â€˜;â€™, '&', '/', '\', ',' , æ”¹è¿›æœç´¢ | Use AndroidX Room to build
  Media database, to parse multi-artists songs and â€˜;â€™, '&', '/', '\', ',' in tags, and improve search result

- [ ] ...

**2023~2024(?)**

- [ ] é‡å†™éŸ³ä¹æ ‡ç­¾ç¼–è¾‘ | Rewrite Tag Editor

- [ ] å¢å¼ºâ€œæ’­æ”¾åˆ—è¡¨è¯¦æƒ…â€(æ”¯æŒæœç´¢ âŒ, æ›´å¥½çš„ä¿®æ”¹æœ¬åœ°åˆ—è¡¨æ–¹å¼ â—WIP, å“åº”æ‰“å¼€æ–‡ä»¶çš„ Intent âŒ) | Enhance Playlist Detail: support search âŒ, Better way to
  modify â—WIP, handle intent of open (playlist) file âŒ

- [ ] æ£€æŸ¥æ–‡ä»¶ | Valid files

- [ ] æ¡Œé¢æ­Œè¯(?) | Desktop lyrics (?)

- [ ] æ”¹è¿› SlidingMusicBar | improve SlidingMusicBar

- [ ] å°è¯•é€‚é… FlyMe / EvolutionX(ç­‰ä¸€ç³»ç±»åŸç”Ÿ)çŠ¶æ€æ æ­Œè¯ | Support some Android's StatusBar lyrics, such as FlyMe / EvolutionX

- [ ] <del>å®Œç¾é€‚é… Android11+ çš„æ–‡ä»¶è®¿é—®(âŒ) | Adapter Android11+ File Permission perfectly</del>

- [ ] <del>éƒ¨åˆ†é‡æ„(æ‰€è°“çš„)"ä¸»é¢˜å¼•æ“" | Refactor so-called Theme Engine</del>

- [ ] <del>ç»Ÿè®¡å¬æ­Œé¢‘ç‡ | Make songs listening statistics</del>

- [ ] ...

<br/>
<br/>
<br/>
<br/>
